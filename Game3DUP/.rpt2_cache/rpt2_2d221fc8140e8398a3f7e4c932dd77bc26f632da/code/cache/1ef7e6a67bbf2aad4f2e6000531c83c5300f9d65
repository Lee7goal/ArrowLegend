{
  "code": "import GamePro from \"../GamePro\";\r\nimport GameProType from \"../GameProType\";\r\nimport MonsterBulletAI from \"../ai/MonsterBulletAI\";\r\nimport MonsterBulletMove from \"../move/MonsterBulletMove\";\r\nimport Game from \"../Game\";\r\nimport { ui } from \"./../../ui/layaMaxUI\";\r\nimport MemoryManager from \"../../main/scene/battle/MemoryManager\";\r\nimport BulletRotateScript from \"../controllerScript/BulletRotateScript\";\r\nexport default class MonsterBullet extends GamePro {\r\n    constructor() {\r\n        super(GameProType.MonstorArrow);\r\n        this.setGameMove(new MonsterBulletMove());\r\n        this.setGameAi(new MonsterBulletAI(this));\r\n        this._bulletShadow = new ui.test.BulletShadowUI();\r\n        Game.footLayer.addChild(this._bulletShadow);\r\n        this.setShadowSize(19);\r\n    }\r\n    setBubble(sb) {\r\n        if (sb == null) {\r\n            console.error('这个子弹有问题');\r\n            return;\r\n        }\r\n        if (sb.bulletMode == 10004 || sb.bulletMode == 10005) {\r\n            this._bulletShadow && this._bulletShadow.removeSelf();\r\n        }\r\n        else {\r\n            Game.footLayer.addChild(this._bulletShadow);\r\n        }\r\n        this.sysBullet = sb;\r\n        if (!this.sp3d) {\r\n            var bullet;\r\n            bullet = (Laya.Sprite3D.instantiate(Laya.loader.getRes(\"h5/bullets/\" + sb.bulletMode + \"/monster.lh\")));\r\n            if (this.sysBullet.id != 10 && this.sysBullet.id != 11 && this.sysBullet.id != 20) {\r\n                bullet.getChildAt(0).transform.localRotationEulerY = -bullet.transform.localRotationEulerY;\r\n                bullet.addComponent(BulletRotateScript);\r\n            }\r\n            MemoryManager.ins.add(bullet.url);\r\n            this.setSp3d(bullet);\r\n        }\r\n        this.gamedata.bounce = sb.ejectionNum;\r\n    }\r\n    static getBullet(sb) {\r\n        let tag = MonsterBullet.TAG + sb.bulletMode;\r\n        Game.poolTagArr[tag] = tag;\r\n        let bullet = Laya.Pool.getItemByClass(tag, MonsterBullet);\r\n        bullet.isDie = false;\r\n        bullet.setBubble(sb);\r\n        return bullet;\r\n    }\r\n    die() {\r\n        if (this.isDie) {\r\n            return;\r\n        }\r\n        this.isDie = true;\r\n        this.curLen = null;\r\n        this.moveLen = null;\r\n        this.stopAi();\r\n        this._bulletShadow && this._bulletShadow.removeSelf();\r\n        this.sp3d.transform.localPositionY = -500;\r\n        this.sp3d.transform.localPositionZ = -500;\r\n        Laya.Pool.recover(MonsterBullet.TAG + this.sysBullet.bulletMode, this);\r\n        MemoryManager.ins.app(this.sp3d.url);\r\n    }\r\n}\r\nMonsterBullet.TAG = \"MonsterBullet_\";\r\nMonsterBullet.count = 0;\r\n",
  "references": [
    "D:/gitworker/Game3DUP/src/game/GamePro.ts",
    "D:/gitworker/Game3DUP/src/game/GameProType.ts",
    "D:/gitworker/Game3DUP/src/main/sys/SysBullet.ts",
    "D:/gitworker/Game3DUP/src/game/ai/MonsterBulletAI.ts",
    "D:/gitworker/Game3DUP/src/game/move/MonsterBulletMove.ts",
    "D:/gitworker/Game3DUP/src/game/Game.ts",
    "D:/gitworker/Game3DUP/src/ui/layaMaxUI.ts",
    "D:/gitworker/Game3DUP/src/main/scene/battle/MemoryManager.ts",
    "D:/gitworker/Game3DUP/src/game/controllerScript/BulletRotateScript.ts"
  ]
}
