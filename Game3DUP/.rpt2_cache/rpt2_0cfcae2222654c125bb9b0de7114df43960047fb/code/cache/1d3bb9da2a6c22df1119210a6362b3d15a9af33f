{
  "code": "import Game from \"./Game\";\r\nimport MaoLineData from \"./MaoLineData\";\r\nimport GameBG from \"./GameBG\";\r\nimport GameHitBox from \"./GameHitBox\";\r\nexport default class GameInfrared {\r\n    constructor(pro_, nn_ = 1) {\r\n        this.vv = new MaoLineData(0, 0, 0, 1);\r\n        this.future = new GameHitBox(2, 2);\r\n        this.redLines = [];\r\n        this.nn = 1;\r\n        this.show_ = false;\r\n        this.nn = nn_;\r\n        this.pro = pro_;\r\n        for (let i = 0; i < this.nn; i++) {\r\n            let redLine = new Laya.Image();\r\n            redLine.skin = \"bg/hongtiao.png\";\r\n            redLine.anchorX = 0.5;\r\n            redLine.anchorY = 0.5;\r\n            redLine.alpha = 0.8;\r\n            this.redLines.push(redLine);\r\n        }\r\n    }\r\n    get show() {\r\n        return this.show_;\r\n    }\r\n    set show(b) {\r\n        this.show_ = b;\r\n        this.show_ = false;\r\n        if (this.show_) {\r\n            for (let i = 0; i < this.redLines.length; i++) {\r\n                var e = this.redLines[i];\r\n                Game.frontLayer.addChild(e);\r\n            }\r\n        }\r\n        else {\r\n            for (let i = 0; i < this.redLines.length; i++) {\r\n                var e = this.redLines[i];\r\n                e.removeSelf();\r\n            }\r\n        }\r\n    }\r\n    moveline(n, x0, y0, clearg) {\r\n        var vv = this.vv;\r\n        var hits = Game.map0.Aharr;\r\n        var vx = GameBG.ww * 20 * Math.cos(n);\r\n        var vz = GameBG.ww * 20 * Math.sin(n);\r\n        this.future.setVV(x0, y0, vx, vz);\r\n        var all = Game.map0.chechHit_arr_all(this.future, hits);\r\n        if (all) {\r\n            vv.reset(x0, y0, x0 + vx, y0 + vz);\r\n            var rs = Game.map0.getPointAndLine(vv, all);\r\n            if (rs) {\r\n                var p = rs[0];\r\n                let l = rs[1];\r\n                vv.reset(vv.x0, vv.y0, p.x, p.y);\r\n                var l1 = new MaoLineData(vv.x0, vv.y0, p.x, p.y);\r\n                l = vv.rebound(l);\r\n                if (l) {\r\n                    return [l1, l];\r\n                }\r\n                return [l1, null];\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    drawMoveline() {\r\n        if (!this.show_) {\r\n            return;\r\n        }\r\n        var hero = this.pro;\r\n        let larr = this.moveline(hero.face2d, hero.hbox.cx, hero.hbox.cy, true);\r\n        for (let i = 0; i < this.nn; i++) {\r\n            if (!larr)\r\n                break;\r\n            let l0 = larr[0];\r\n            let l1 = larr[1];\r\n            var cp = l0.getCenter();\r\n            var redLine = this.redLines[i];\r\n            Game.frontLayer.addChild(redLine);\r\n            redLine.x = cp.x;\r\n            redLine.y = cp.y;\r\n            redLine.height = l0.getlen();\r\n            redLine.rotation = l0.atan2() / Math.PI * 180 + 270;\r\n            if (l1) {\r\n                larr = this.moveline(l1.atan2(), l1.x0, l1.y0, false);\r\n            }\r\n        }\r\n    }\r\n}\r\n",
  "references": [
    "D:/game01/Layabox/Game3DUP/src/game/Game.ts",
    "D:/game01/Layabox/Game3DUP/src/game/MaoLineData.ts",
    "D:/game01/Layabox/Game3DUP/src/game/GameBG.ts",
    "D:/game01/Layabox/Game3DUP/src/game/GameHitBox.ts",
    "D:/game01/Layabox/Game3DUP/src/game/move/ArrowGameMove0.ts",
    "D:/game01/Layabox/Game3DUP/src/game/GamePro.ts"
  ]
}
