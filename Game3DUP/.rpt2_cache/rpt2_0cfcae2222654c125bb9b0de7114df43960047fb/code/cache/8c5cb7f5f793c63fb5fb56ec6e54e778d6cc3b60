{
  "code": "import Game from \"./Game\";\r\nimport Hero from \"./player/Hero\";\r\nexport default class GameExecut extends Laya.EventDispatcher {\r\n    constructor() {\r\n        super();\r\n        this.now = 0;\r\n        this.st = 0;\r\n        this.stopt = 0;\r\n        this.startt = 0;\r\n        this.dt = 0;\r\n        this.isRun = false;\r\n        this.now = Laya.Browser.now();\r\n        this.st = this.now;\r\n        this.stop_();\r\n    }\r\n    start() {\r\n        this.now = Laya.Browser.now();\r\n        this.dt += (this.now - this.stopt);\r\n        var arr = Game.AiArr;\r\n        for (let i = 0; i < arr.length; i++) {\r\n            if (arr[i].animator)\r\n                arr[i].animator.speed = 1;\r\n        }\r\n        this.isRun = true;\r\n        Laya.stage.frameLoop(1, this, this.ai);\r\n    }\r\n    stop_() {\r\n        this.now = Laya.Browser.now();\r\n        this.stopt = this.now;\r\n        Laya.timer.clear(this, this.ai);\r\n        var arr = Game.AiArr;\r\n        for (let i = 0; i < arr.length; i++) {\r\n            if (arr[i].animator)\r\n                arr[i].animator.speed = 0;\r\n        }\r\n        this.isRun = false;\r\n    }\r\n    getWorldNow() {\r\n        this.now = Laya.Browser.now();\r\n        return (this.now - this.dt);\r\n    }\r\n    ai() {\r\n        var arr = Game.AiArr;\r\n        for (let i = 0; i < arr.length; i++) {\r\n            arr[i].ai();\r\n        }\r\n        if (arr.length == 1) {\r\n            if (Game.bg.npcId == 0) {\r\n                if (Game.state == 0 && Game.hero.playerData.lastLevel != Game.hero.playerData.level && Game.isPopupSkill == 0) {\r\n                    Laya.stage.event(Game.Event_SELECT_NEWSKILL, Game.hero.playerData.level);\r\n                }\r\n            }\r\n            if (arr[0] instanceof Hero) {\r\n                Game.openDoor();\r\n                Game.map0.checkDoor();\r\n            }\r\n        }\r\n        var farr = Game.map0.Fharr;\r\n        for (let i = 0; i < farr.length; i++) {\r\n            var fhit = farr[i];\r\n            var pro = fhit.linkPro_;\r\n            if (fhit.hit(fhit, Game.hero.hbox)) {\r\n                pro.closeCombat(Game.hero);\r\n                if (pro.gamedata.ammoClip == 0) {\r\n                    farr.slice(farr.indexOf(fhit), 1);\r\n                }\r\n            }\r\n        }\r\n        Game.buffM.exe(this.getWorldNow());\r\n    }\r\n}\r\n",
  "references": [
    "D:/game01/Layabox/Game3DUP/src/game/Game.ts",
    "D:/game01/Layabox/Game3DUP/src/game/player/Hero.ts"
  ]
}
