{
  "code": "import GamePro from \"../GamePro\";\r\nimport GameProType from \"../GameProType\";\r\nimport Game from \"../Game\";\r\nimport HeroArrowAI from \"../ai/HeroArrowAI\";\r\nimport ArrowGameMove0 from \"../move/ArrowGameMove0\";\r\nexport default class HeroBullet extends GamePro {\r\n    constructor() {\r\n        super(GameProType.HeroArrow);\r\n        this.buffAry = [];\r\n        this.fcount = 0;\r\n        this.setGameMove(new ArrowGameMove0());\r\n        this.setGameAi(new HeroArrowAI(this));\r\n    }\r\n    setBullet(id) {\r\n        if (!this.sp3d) {\r\n            this.setSp3d(Laya.Sprite3D.instantiate(Laya.loader.getRes(\"h5/bullets/\" + id + \"/monster.lh\")));\r\n            console.log(\"创建主角的子弹\");\r\n        }\r\n        if (Game.skillManager.arrowHeadId > 0) {\r\n            if (!this.head) {\r\n                let ss = Laya.loader.getRes(\"h5/bullets/skill/\" + Game.skillManager.arrowHeadId + \"/monster.lh\");\r\n                if (ss) {\r\n                    this.head = Laya.Sprite3D.instantiate(ss);\r\n                    this.head.transform.localRotationEulerY = -180;\r\n                    this.addSprite3DToChild(\"Gua\", this.head);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    static getBullet(id) {\r\n        let bullet = Laya.Pool.getItemByClass(HeroBullet.TAG, HeroBullet);\r\n        bullet.hit_blacklist = null;\r\n        bullet.getGameMove().fv = null;\r\n        bullet.getGameMove().ii = 1;\r\n        bullet.chuantouSkill = null;\r\n        bullet.fantanSkill = null;\r\n        bullet.fcount = 0;\r\n        bullet.tansheSkill = null;\r\n        bullet.buffAry.length = 0;\r\n        bullet.isDie = false;\r\n        bullet.setBullet(id);\r\n        bullet.chuantouSkill = Game.skillManager.isHas(1006);\r\n        bullet.fantanSkill = Game.skillManager.isHas(1008);\r\n        bullet.fcount = bullet.fantanSkill ? 2 : 0;\r\n        bullet.tansheSkill = Game.skillManager.isHas(1009);\r\n        let arr = [2001, 2002, 2003, 5001, 5002, 5003, 5004];\r\n        for (let i = 0; i < arr.length; i++) {\r\n            if (Game.skillManager.isHas(arr[i])) {\r\n                bullet.buffAry.push(arr[i]);\r\n            }\r\n        }\r\n        return bullet;\r\n    }\r\n    die() {\r\n        if (this.isDie) {\r\n            return;\r\n        }\r\n        this.isDie = true;\r\n        this.stopAi();\r\n        this.setSpeed(0);\r\n        this.sp3d.parent && this.sp3d.parent.removeChild(this.sp3d);\r\n        Laya.Pool.recover(HeroBullet.TAG, this);\r\n    }\r\n}\r\nHeroBullet.TAG = 'HeroBullet';\r\n",
  "references": [
    "D:/game01/Layabox/Game3DUP/src/game/GamePro.ts",
    "D:/game01/Layabox/Game3DUP/src/game/GameProType.ts",
    "D:/game01/Layabox/Game3DUP/src/game/Game.ts",
    "D:/game01/Layabox/Game3DUP/src/game/ai/HeroArrowAI.ts",
    "D:/game01/Layabox/Game3DUP/src/game/move/ArrowGameMove0.ts",
    "D:/game01/Layabox/Game3DUP/src/main/sys/SysSkill.ts"
  ]
}
